# 【我的世界进阶开服教程】2:为什么我的服务器没人?看了这篇教程,原来开服确有诀窍,但并不是我想的那样
本系列文章目前在MineBBS、b站、知乎同时发表  
**如果你是连服务器都没成功开起来过的小白，那么我建议你到各大平台搜索“我的世界开服教程”，根据教程操作，直到你做到自己开设的服务器能够让你自己连接并在里面正常游戏  
注意：我的世界分Java版和基岩版，基岩版不能直接进入Java版服务器，Java版也不能直接进入基岩版服务器！首先确保你能完全分清Java版和基岩版，然后再学习开服。​**  
**我有的时候会忘更新我的文章，可以直接在文章下面评论催更，或者加我的群715732100联系我，或者和我一起讨论开服吧**  
**由于本文需要跨平台发表，因此格式化的内容较少，还请各位读者谅解！**  
上回说到服务器的硬件（计算资源），这次来讲网络  
之所以我把网络和硬件分开来讲，是因为网络这里的说道实在是太多了，完全可以跟硬件的内容并列  
## 广域网和局域网
在计算机发展初期，计算机学家们用电线把电脑连接在一起让他们互相传输数据，网络就出现了。这样连在一起的电脑变多，就出现了互联网。后来人们铺设电缆让这个互联网扩大范围，直至把全世界的电脑连接在一起，因特网(Internet)就出现了。  
因特网是个好东西，它模糊了人与人之间距离的概念，让人们相隔距离很远也可以互相联系。然而这样的因特网还有一个问题：因特网上的计算机太多，很不好管理。因此局域网就和因特网结合到了一起。把同一个地点的电脑连接在一起，就是一个局域网，然后再把这个局域网连接到因特网。在同一个局域网里的电脑可以互相信任，互相敞开心扉允许被对方搜索到。而他们可以对外一致提高警戒，防止被来自因特网上其他计算机攻击。  
## 网络五层模型、IP、TCP和UDP协议
你有没有想过，网线只能传输电信号，电脑是怎么用这一根根电线传输如此复杂的信息的？为了互相通信，计算机之间也有一种“语言”，这种语言就是协议。网线中传输的只有电流，如何通过电流表达信息呢？可以通过控制电流的状态来表达这些信息，如果用没有电流代表0，有电流代表1，并规定一个数字逢二进一，例如10表示2，11表示3，数字就表达出来了。网络设备中负责改变网线中有无状态工作的软硬件就工作在**物理层**。像你家里的网线，和入户的网线和光纤，都可以理解为工作在物理层。  
在规定好信号通断为0和1后，计算机还需要规定如何用0和1传递复杂的数据。例如计算机需要通过网络发送5和8，那么它需要让网络设备在网线上发出“101”和“1000”两个信号，可以对方接收信号的时候，要怎么知道这是5和8？如果连在一起发送1011000，那么对方该如何分割这段信息就变得很棘手：到底是分成10，11，00，还是分成1011和000？既然不知道如何分割长度，那就不要决定长度了，所有的数字全都用同一个长度表示好了，至于更高位没有数字就用0表示。例如要发送5，那么就是000...0101。这样对方收到消息之后，就每隔多少位数字分割一下，再从里面提取数字就可以了。负责把各种数字转化成信号的网络设备和软件就工作在**链路层**。交换机和AP（路由器上发射wifi信号的模块）就工作在链路层，用来标识网卡身份的mac地址也工作在链路层。  
在规定好如何传递数字后，电脑还需要知道哪些数字组合在一起能够形成一段“话”，这样的一段“话”用来给对方传达一个完整的信息，例如当前的时间，向别人发送的消息，以及你在mc服务器里进行的挖方块，攻击生物等动作。这样的一段“话”就是数据包。此外电脑还需要把这些数据包打上标记，标记他们应该被发送给哪些电脑，不应该被发送给哪些电脑，应该通过什么样的方式发送给其他电脑。负责这些工作的网络设备和软件就工作在**网络层**。路由器、IP地址和ICMP协议（ping命令的原理）就工作在这一层。  
在规定好数据包应该长什么样了之后，还需要规定这些数据包应该怎么样进行传输，发送得错了或者丢了怎么办。计算机可以选择多次发送同一个数据包来保证数据包安全到达，也可以选择发完就不管了，你爱收不收反正我发给你了。负责控制这些发送数据包行为的软件工作在**传输层**，tcp和udp协议都工作在这一层。  
规定好发送数据包的行为后，还需要规定电脑上的软件应该如何处理这些数据包，这些数据包的格式是什么样的，如何排列。如果说链路层的那些0和1的长度是硬件之间的语言，那么这些数据包的格式就是软件之间的语言。这一层叫**应用层**，http、ftp、websocket、smb、我的世界服务器用的协议都工作在这一层。  
## 什么是服务端和客户端
电脑在互联网上通信的方式就像打电话一样，同样有一个打电话的人和一个接电话的人。在我们平时打电话的时候，接电话的人必须在线，也就是说有信号，或者插着电话线，打电话的人拨通电话后，接电话的人的铃声才会响起。如果打电话的时候对方没信号或者关机了，电话就根本拨不通，提示“您拨打的电话已关机”。在互联网上电脑和服务器通信也是一样，服务器上运行的服务端软件就是接电话的人，而你的电脑上的客户端，也就是游戏，就是打电话的人。
## IP地址、端口和套接字
为了让互联网上的每台电脑都有一个身份，IP协议规定要为每台电脑都分配一个地址，这个地址就是**IP地址**。当时你在云服务器上开服的时候，输入的那个用点连接的四个数字就是IP地址。就像去别人家串门需要知道他家的地址一样，在计算机上访问其他电脑需要知道它的IP地址。这样，电脑才能向正确的目标发送和接收数据包。用上文的例子理解，IP地址就是电话号，客户端需要知道IP地址这个“电话号”，然后才能向服务器“拨打电话”。但是这带来了一个问题，在我们打电话时，是不可以同时给很多个人打电话的，我们的电话一旦拨通就无法同时启动别的通话，要想启动别的通话只能把当前的通话进入等待状态，然后再拨通其他电话；而如果其他人打电话进来，就会拨不通，提示“您拨打的电话正在通话中”，或者提示你稍等一会，如果提示你需要稍等了，那么对方的电话会提示你打了电话进来，并让他选择挂断你们其中一人的电话或者让你们其中一人的电话进入等待状态。这么“逆天”的设计是不能放到计算机上的，由于服务器要同时和其他很多个电脑进行通信，也就是说服务器这个“公共电话”上会同时有很多个人希望用这台电话，让这些人排队等待那简直是灾难性的。因此计算机上出现了**端口**这一概念。它就像给同一部电话接上了很多条电话线，一条电话线就是一个端口。如果当前某条电话线占线了，那么他就可以从另一条电话线打进来到同一个电话，那么在已经有人使用电话的时候，后来的人就可以拿起其他的电话线打电话而互不干扰，这样就实现让同一台电话允许很多人同时打电话了。在计算机上，一共有固定65536个端口，也就是65536条“电话线”（好多线啊，但是没关系，这些“电话线”都是虚拟的）。“电话线”也需要编号，“电话线的编号”“就是**端口号**，范围是0到65535。IP地址就是电话机，端口就是电话机上的一条电话线，那么IP地址和端口在一起就指定了特定电话上的一条特定的电话线。这样的一个组合就叫**套接字**。有了电话号（IP地址）和电话线编号（端口号），你就可以拨通对方的电话了。你拨打那个电话的那条电话线的行为就叫**访问**。  
让我们用带端口的java版服务器的连接地址再解释一下这个问题：假设有一个这样的连接地址：11.4.5.14:19810，在这个地址中，11.4.5.14就是一个IP地址，19810就是一个端口号，而整个这个连接地址就是一个套接字。  
## 服务器、服务端和服务
继续上文的例子，如果要打给**服务器**这个“公共电话”，“公共电话”的电话线另一头必须得有一个人接电话才行，这个接电话的人就是**服务端**，在计算机上通常是一个程序。如果没有这个接电话的人，你就拨不通这条电话线。为了让你打电话后对面接电话的人一定是那人，那人暂时地占领了这条电话线，拒绝其他人使用这条电话线，这个占领电话线的行为就叫**绑定**（绑定到端口或者说绑定到套接字）。这也是为什么你在服务器上有时操作失误会见到报错“每个套接字只允许使用一次”。此外你拨了电话，肯定是有事要找电话对面的那个人谈。你们所交谈的这个话题就是**服务**，从对方得知你们交谈的内容到他来到电话线另一端等待的过程就是**开启服务**。  
让我们再整理一下整件事的脉络：你找一个人（服务端）要和他谈一件事（服务），于是这人为了能接到你的电话，来到了电话线另一头（服务端启动），并暂时占有了这条电话线（绑定端口），此时他已经做好了接听你电话的所有准备（开启服务）。你（客户端）想给那人打电话时，首先用对方的电话号（IP地址）和电话线编号（端口号）组合成一段代码（套接字）输入到自己的电话里拨打出去（访问）。  
反过来再讲一遍：服务端启动（对方来到电话线另一头），绑定端口（占有电话线），然后开启了服务（开始等你打来电话跟他讨论某事）。客户端使用由IP地址和端口组成的套接字访问服务器上的服务。（用电话号和电话线编号拨打电话和对方交流一件事）
## IPv4的枯竭和IPv6推广的层层阻力

## 为家里的宽带开通IPv6和申请公网IPv4
## 商用宽带
## 内网穿透
## 上行困境
## 带宽的计算
## DDNS服务
## 选购域名
