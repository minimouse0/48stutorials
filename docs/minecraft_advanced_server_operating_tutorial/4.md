# 【我的世界进阶开服教程】4:为什么我的服务器没人?看了这篇教程,原来开服确有诀窍,但并不是我想的那样
本系列文章目前在MineBBS、b站、知乎同时发表  
**如果你是连服务器都没成功开起来过的小白，那么我建议你到各大平台搜索“我的世界开服教程”，根据教程操作，直到你做到自己开设的服务器能够让你自己连接并在里面正常游戏  
注意：我的世界分Java版和基岩版，基岩版不能直接进入Java版服务器，Java版也不能直接进入基岩版服务器！首先确保你能完全分清Java版和基岩版，然后再学习开服。​**  
**我有的时候会忘更新我的文章，可以直接在文章下面评论催更，或者加我的群715732100联系我，或者和我一起讨论开服吧**  
**由于本文需要跨平台发表，因此格式化的内容较少，还请各位读者谅解！**  
上回说到开服需要了解的计算机基础知识，终于要说到mc服务器软件上了，本文将讲解服务器的核心、插件、mod、代理端等等  
本文部分内容转载自笨蛋文档（nitwikit.yizhan.wiki），这是一个开放的开服知识百科，包含几乎开服所需要知道的所有知识和操作方法。阅读完本教程之后如果对某些部分需要更深入的了解，都可以在这个网站中查找和阅读！  

在各种开服教程中，你应该已经知道了java版有一个非常有名的服务端叫paper，而基岩版有一个非常有名的加载器叫liteloaderbds（现在已改名levilamina且因为不可抗力停更）。接下来我们将探讨这些服务端以及更多形式的服务器软件，让你对于整个服务器的玩法层面有一个更加深入而全面的认识。

## 什么是核心

在网络一章我们提到，玩家在连接服务器时，是一个软件在电脑上开放了一个端口，然后玩家来连接到这个端口。然后在游戏的过程中，服务端会处理玩家游戏客户端相关数据，然后将那些数据发送给玩家。这样，玩家就能远程地操作自己在服务器的角色，和其他服务器中的内容或角色互动了。

虽然在本文开头我已经提醒过各位要有先能够开起来一个服务器的基础知识，但是现在为了让各位更深入地理解服务端和核心的概念，让我们从头再操作一遍吧。

《我的世界》官方提供了java版服务器的最原始版本，通常我们有以下方法来下载这些它们：

如果你有正版，下载和打开官启（官方版启动器，在minecraft.net登录正版帐号后可以下载到），进入你安装新版本的页面，版本一栏上面会有一个“服务器”，选择好自己要下载的服务端版本后，点击这个按钮就可以下载对应的原版服务端。

部分第三方启动器也可以下载服务端，以PCL2为例，转到“下载”页，在“自动安装”中选择好自己希望下载的版本，先不要下载，鼠标悬停在对应版本上时，最右侧会出现三个按钮。当鼠标悬停在最右侧的按钮上时，会提示“下载服务端”。点击这个按钮即可下载该版本的原版服务端。

你也可以从网站上下载服务端，网址是https://www.minecraft.net/zh-hans/download/server 。然而通常这里只会提供最新版服务端的下载，你可以将下载链接点击右键复制其链接，然后找到下载链接中的版本号，将其替换为你要下载的版本号。

服务端应该是一个以.jar结尾的文件。下载好服务端后，将它放进任意空文件夹，然后双击它即可开服。

双击之后，你会发现什么窗口都没有出现。这是正常的。然后你会发现服务端所在的文件夹多出了几个文件，其中一个文件是“eula.txt”。现在编辑这个文件，在文件的结尾找到false，将它改成true，之后再双击jar文件。再等一会，你会发现文件夹里又出现了一些新文件。再过一会，弹出了一个窗口，那就是你的服务器内置的管理面板，就是太简陋了。

这么简陋的管理面板，不要也罢。使用命令行启动jar文件，并带上-nogui参数，例如java -jar server.jar -nogui。现在，服务端应该就完全运行在命令行里，而没有什么简陋的管理面板了。-nogui的作用就是关闭这个面板。平时非常推荐关闭这个面板，因为它功能很少，但是会显著占用内存。

现在，直接连接服务器的25565端口，就可以加入游戏了。如果你的服务器并不支持25565端口开放到公网，那就按照你之前的经验去server.properties里面修改端口，再用新端口进入。

至此，我们算是完成了最简单的开服：下载原版服务端，修改eula.txt，使用-nogui参数，就能开起一个最简单的我的世界服务器。现在你终于知道为什么在些大佬说“开服有手就行”了吧。因为开一个原版服务端总结下来无非只需要三步而已。

现在你已经搭建好了服务器完整的结构，让我们从开一个mc服务器的层面，看看你的服务器的组成部分吧。
- 硬件/云服务器：这是服务器的硬件部分，它决定了服务器的性能，也就是处理玩家游戏数据的能力。
- 操作系统：它决定了你服务器对各类软件的兼容性，以及你对服务器外围各类功能的基础操作方式，包括文件管理、安装新软件等。
- 其他工具类软件：面板、远程管理、远程控制软件、代理端等。它们用来提高你管理服务器的效率，优化或扩展你服务器的功能或者让你用服务器同时搭建一些其他方面的服务。
- 服务端：这是你服务器最重要的部分，它提供了你的游戏服务器的绝大部分功能
    - 核心：它就相当于服务端的心脏，它除了提供服务器中最基本的游戏玩法，处理游戏中最基本的游戏数据外，很多核心还会在运行时同时运行你为它添加的额外软件，借助这些软件进一步提高它的性能。因此，核心往往是服务端中话语权最大的，它除了决定几乎所有的游戏内容和扩展功能要如何运行，还为扩展功能软件指定了许多规范，这些软件必须按照他制定的规范去开发，才能正确地实现其要扩展的功能。通常情况下，开服时要执行的可执行文件就是服务端的核心。
    - EULA：（最终用户许可协议）是软件开发者或发行者授权用户使用特定软件产品时的规定，用户必须接受该协议才能安装和使用软件。它并不止以单独的形式存在，而是以一种抽象的方式存在于你服务端的各处。它是你开服过程中与各软件作者达成的约定，至于其中具象化的部分则包括开服时生成的eula.txt，其他各插件的配置文件中，以及各软件的网站中。一些软件可能并不要求你通过输入代码或修改文件等方式进行操作来同意其eula,这是因为它们规定你使用该软件即视为同意eula。虽然我们很多时候不那么需要通读并记忆所有软件的eula,但是在我们使用服务端开服的过程中，要对一些可能违反eula的行为保持警惕，尤其是自行二分发付费软件、在服务器中向玩家对部分插件功能进行收费的行为，都很可能违反了一些软件的eula。
    - 存档：俗称地图，作为一个已经跑来开服的人，你已经了解了它的基本概念。在服务端中，虽然我们一般只为一个服务端使用一个存档，但是绝大多数服务端都可以实现多存档灵活切换，只需要修改server.properties中的level-name即可。除了切换存档，许多服务端都可以实现同时运行多个存档。例如Paper核心就将同一个世界的三个维度分为三个存档以提高性能，在实际游戏中，玩家表面上是正常地在三个维度之间传送，然而对于服务器来说，他们正在不同的存档之间传送。还有一些软件如多世界插件，可以将更多的存档同时加载，并允许玩家在其中自由传送。
    - 插件/模组：这部分是服务器最主要的扩展软件，它们被用于实现服务端的各种扩展功能，如加入新方块、新实体、新游戏规则，以及实现各种玩法，如领地、公会、传送等。我们马上就会讲到插件和模组的区别。
    - 数据包（java版）/adddon（基岩版）：这部分也是用于扩展服务器功能的。它们是由游戏官方提供的内容扩展平台，可以由任何核心加载，但是相较插件和模组来说功能更少。它们具体和插件和模组有什么区别在马上就会讲到。
    - 配置文件：这部分是服务器各种功能的开关和调节器。它就像各种控制面板，能够让你控制服务器中的各个软件定制各种你想要的功能。
    - 启动脚本：有很多服务端启动时都需要启动脚本，它就像为服务端核心编写的一段额外的程序，用来更加精细化地控制服务端的行为。如果服务端带有启动脚本，一般我们需要运行启动脚本来启动服务器，而不是直接运行服务端可执行文件。
 
你现在可以在这个原版核心的服务器里随便逛逛玩玩，但是很快你就会发现一个事情：这个服务器似乎只有一些原版的指令可以自定义，像你玩过的其他服务器，都有各种什么花里胡哨的登录、菜单、跨服传送、多世界等等各种各样的功能，这些都是用指令能实现的吗？并不是。

为了开一个功能丰富的服务器，我们需要对服务器进行更加深度的自定义。然而，凭着原版的指令是无法完成各种复杂的功能的。指令在功能上有所欠缺，并不能完成我们所有自定义服务器的需求。因此为了能够拥有更高地自定义服务器的能力，我们需要使用功能更全面的核心。

## 核心的分类

在更加深入地了解各种核心的特性、选择核心并了解它们的操作方式前，我们需要先对业界常用的核心有一个大致的了解。首先，无论Java版还是基岩版，服务器都分为以下四大类：

- 原版端：由我的世界官方发布的服务端，只有游戏内置的功能和一些简单的自定义方式，不支持任何深度定制。它们只能加载数据包或addon。原版端Java版只有vanilla一个核心，基岩版只有BDS一个核心。由于原版端特殊的定义，将来也不会有其他的原版端核心。
- 插件端：可以加载插件的服务端，Java版的代表是Bukkit及其分支，基岩版的代表是LeviLamina。不能加载模组。
- 模组端：可以加载模组（mod）的服务端，代表是Forge和Fabric。不能加载插件。
- 混合端：可以同时加载一部分插件和一部分模组的服务端。虽然同时兼容了插件和模组，但是兼容性并不是特别好。

接下来，我们来介绍每个大类中常用的服务端：

- 原版端：
    - Java版：
        - Vanilla：中文名一般叫香草端，但是大家更多地叫原版端。你从启动器中下载到或者游戏官网下载的服务端。
     
    - 基岩版：
        - BDS：英文全称Bedrock Dedicated Server，中文名只有其全称的译名基岩版专用服务器。是你从游戏官方下载的服务端。
     
- 插件端：
    - Java版：
        - Bukkit：中文名一般叫水桶端，在插件端是祖师爷的地位，基于Java的patch控制原版端的行为，在保留原版端游戏内容的基础上提供了许多自定义的可能性。虽然功能不太多，但是大量优秀的新服务端都基于它的分支开发，它的Bukkit API是社区最大的API生态，也催生了Java版繁荣的生态社区。
        - Spigot：中文名一般叫水龙头。是Bukkit的分支，也就是基于Bukkit开发。相比Bukkit功能更丰富，它的API生态也十分繁荣，有不少优秀的服务端基于它的分支开发。
        - Paper：是Spigot的分支。相比Spigot不仅功能更加丰富，还大幅优化了性能，在玩家较多或配置较低的服务器上也能获得流畅的游戏体验，但代价是牺牲了部分生电玩家需要利用的游戏特性。Paper目前是世界上最有名的插件端，它的API生态也十分繁荣，不少优秀的服务端基于它开发。
        - Pufferfish：中文名一般叫河豚端。在Paper的基础上进一步大幅优化性能，但是牺牲了更多游戏特性。
        - Purpur：在Pufferfish的基础上添加了很多花里胡哨的功能。
        - Gale：Paper的分支，在Paper的基础上进一步优化了性能。
        - Leaf：Gale的分支，添加了一些给中国的国际版服务器使用的功能。
        - Leaves：Paper的分支，为生电服设计的核心，还原了大量Paper牺牲的生电特性，代价是性能有所下降，不过性能仍然是明显好于原版端的。
        - Folia：Paper的分支，能够真正意义上地充分利用多核CPU，几乎从根本上解决了我的世界服务器在服务器专用CPU上无法充分发挥性能的问题，采用此核心能为大型服务器节省大量采购服务器硬件的成本。但是该核心由于对游戏底层改动较大，大部分插件都需要专门适配，因此目前只有部分主流插件和功能简单的插件适配了该核心。
     
    - 基岩版：
        - LeviLamina：前身为LiteLoaderBDS，测试版基于BDS服务端中的pdb文件（存储BDS调试信息的文件）通过逆向的方式，导出BDS中的符号和地址（可以理解为破解了BDS端），并基于这些信息修改和控制原版端的行为。进入正式版后，改为游戏官方保密地对其开发者提供这些信息。LeviLamina可以说是中国大陆最受欢迎的插件加载器（插件端），功能非常丰富全面，绝大多数生存服务器都在采用该软件。
        - Endstone：一个使用python开发的插件加载器，不依赖任何额外信息，直接分析BDS可执行文件来逆向并读取和控制服务端行为。由于不依赖任何额外信息逆向BDS是一件十分具有挑战性的事，该加载器目前功能较少。然而正是因为该特性，该加载器不容易受到BDS附加内容变动的干扰。2024年，LeviLamina由于游戏官方移除pdb文件而开发受阻，该插件加载器未受影响，并以这种方式被大家所熟知。
    

## server.properties
## 第三方核心配置文件
## 插件的使用
## 选择合适的mod
## 代理端和群组服
## 互通服
## 跨版本
## 性能优化
## 备份
